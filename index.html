<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>src/expect</title>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="nimdoc.out.css?v=2.0.4">

<!-- JS -->
<script type="text/javascript" src="dochack.js?v=2.0.4"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">src/expect</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-select-wrapper">
      <label for="theme-select">Theme:&nbsp;</label>
      <select id="theme-select" onchange="setTheme(this.value)">
        <option value="auto">ðŸŒ— Match OS</option>
        <option value="dark">ðŸŒ‘ Dark</option>
        <option value="light">ðŸŒ• Light</option>
      </select>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a id="indexLink" href="theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" onkeyup="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">expect
  <li><a class="reference" href="#expect%2COption%5BT%5D%2Cproc" title="expect[T](opt: Option[T]; err_proc: proc): T">expect[T](opt: Option[T]; err_proc: proc): T</a></li>
<li><a class="reference" href="#expect%2COption%5BT%5D%2Cvarargs%5Bstring%2C%5D" title="expect[T](opt: Option[T]; err_str: varargs[string, `$`] = &quot;&quot;): T">expect[T](opt: Option[T]; err_str: varargs[string, `$`] = &quot;&quot;): T</a></li>

</ul>
<ul class="simple nested-toc-section">expectFunc
  <li><a class="reference" href="#expectFunc%2COption%5BT%5D%2Cproc" title="expectFunc[T](opt: Option[T]; err_func: proc): T">expectFunc[T](opt: Option[T]; err_func: proc): T</a></li>

</ul>
<ul class="simple nested-toc-section">expectProc
  <li><a class="reference" href="#expectProc%2COption%5BT%5D%2Cproc" title="expectProc[T](opt: Option[T]; err_proc: proc): T">expectProc[T](opt: Option[T]; err_proc: proc): T</a></li>

</ul>

    </ul>
  </details>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    <a href="https://github.com/penguinite/expect/tree/main/src/expect.nim#L1" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/penguinite/expect/edit/main/src/expect.nim#L1" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

    <div id="tocRoot"></div>
    
    <p class="module-desc"><p>This module implements a bunch of Rust-style <tt class="docutils literal"><span class="pre"><span class="Identifier">expect</span></span></tt> procedures that you can use to get slightly cleaner code when dealing with <tt class="docutils literal"><span class="pre"><span class="Identifier">Option</span></span></tt> objects.</p>
<p>Basically, this module contains 2 procedures, that basically do the same thing.</p>
<ul class="simple"><li>The first one, when given a null <tt class="docutils literal"><span class="pre"><span class="Identifier">Option</span></span></tt> result will print an error message and quit</li>
<li>The second one when given a null <tt class="docutils literal"><span class="pre"><span class="Identifier">Option</span></span></tt> will instead call the provided procedure and do nothing else.</li>
</ul>
<p>Here is an example of how to use these</p>

<p><strong class="examples_text">Example: cmd: -r:off</strong></p>
<pre class="listing"><span class="Keyword">import</span> <span class="Identifier">src</span><span class="Operator">/</span><span class="Identifier">expect</span>
<span class="Keyword">import</span> <span class="Identifier">std</span><span class="Operator">/</span><span class="Identifier">options</span>
<span class="Comment"># Let's say we are fetching some user data</span>
<span class="Keyword">var</span>
  <span class="Identifier">user_submitted_data</span> <span class="Operator">=</span> <span class="Identifier">some</span><span class="Punctuation">(</span><span class="StringLit">&quot;Hello World!&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">user_didnt_submit_data</span> <span class="Operator">=</span> <span class="Identifier">none</span><span class="Punctuation">(</span><span class="Identifier">string</span><span class="Punctuation">)</span>

<span class="Identifier">echo</span> <span class="Identifier">expect</span><span class="Punctuation">(</span><span class="Identifier">user_submitted_data</span><span class="Punctuation">,</span> <span class="StringLit">&quot;Error! User didn't submit data&quot;</span><span class="Punctuation">)</span>
<span class="Comment"># This will print &quot;Hello World!&quot;</span>

<span class="Identifier">echo</span> <span class="Identifier">expect</span><span class="Punctuation">(</span><span class="Identifier">user_didnt_submit_data</span><span class="Punctuation">,</span> <span class="StringLit">&quot;Error! User didn't submit data&quot;</span><span class="Punctuation">)</span>
<span class="Comment"># This will print &quot;Error! User didn't submit data&quot; and quit</span></pre></p>
    <div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="expect-procs-all">
  <div id="expect,Option[T],proc">
  <dt><pre><span class="Keyword">proc</span> <a href="#expect%2COption%5BT%5D%2Cproc"><span class="Identifier">expect</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">opt</span><span class="Other">:</span> <span class="Identifier">Option</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">err_proc</span><span class="Other">:</span> <span class="Keyword">proc</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
  <dd>
    
    <p>This procedure does the same things that <tt class="docutils literal"><span class="pre"><span class="Identifier">expect</span><span class="Punctuation">(</span><span class="Punctuation">)</span></span></tt> does, but it allows you to pass a procedure instead of printing an error message and quitting.</p>
<p>You sadly can't pass data to the procedure that will be called, but you can access variables in the function scope instead. That might serve as a suitable alternative.</p>

<p><strong class="examples_text">Example: cmd: -r:off</strong></p>
<pre class="listing"><span class="Keyword">import</span> <span class="Identifier">std</span><span class="Operator">/</span><span class="Identifier">options</span>
<span class="Keyword">type</span> <span class="Identifier">TokenKind</span> <span class="Operator">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">Symbol</span><span class="Punctuation">,</span> <span class="Identifier">Sign</span>

<span class="Comment"># Some random data</span>
<span class="Comment"># We can use expect to filter out any unknown tokens when we parse it.</span>
<span class="Keyword">let</span> <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">Option</span><span class="Punctuation">[</span><span class="Identifier">TokenKind</span><span class="Punctuation">]</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Operator">@</span><span class="Punctuation">[</span>
  <span class="Identifier">some</span><span class="Punctuation">(</span><span class="Identifier">Symbol</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">some</span><span class="Punctuation">(</span><span class="Identifier">Symbol</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">none</span><span class="Punctuation">(</span><span class="Identifier">TokenKind</span><span class="Punctuation">)</span><span class="Punctuation">,</span>
<span class="Punctuation">]</span>

<span class="Keyword">var</span> <span class="Identifier">count</span> <span class="Operator">=</span> <span class="DecNumber">0</span>
<span class="Keyword">proc</span> <span class="Identifier">log</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;Unknown token encountered at position &quot;</span><span class="Punctuation">,</span> <span class="Identifier">count</span><span class="Punctuation">,</span> <span class="StringLit">&quot;!&quot;</span>
  
<span class="Keyword">for</span> <span class="Identifier">i</span> <span class="Keyword">in</span> <span class="Identifier">data</span><span class="Punctuation">:</span>
  <span class="Keyword">discard</span> <span class="Identifier">i</span><span class="Operator">.</span><span class="Identifier">expect</span><span class="Punctuation">(</span><span class="Identifier">log</span><span class="Punctuation">)</span></pre>
    <a href="https://github.com/penguinite/expect/tree/main/src/expect.nim#L52" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/penguinite/expect/edit/main/src/expect.nim#L52" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="expect,Option[T],varargs[string,]">
  <dt><pre><span class="Keyword">func</span> <a href="#expect%2COption%5BT%5D%2Cvarargs%5Bstring%2C%5D"><span class="Identifier">expect</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">opt</span><span class="Other">:</span> <span class="Identifier">Option</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">err_str</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">string</span><span class="Other">,</span> <span class="Other">`</span><span class="Operator">$</span><span class="Other">`</span><span class="Other">]</span> <span class="Other">=</span> <span class="StringLit">&quot;&quot;</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
  <dd>
    
    <p>When given a result (or more accurately, an Option object) it will check whether or not it's empty. And if it is then it will simply print the error message that is provided and quit with an error code of &quot;1&quot;</p>
<p>Here is an example</p>

<p><strong class="examples_text">Example: cmd: -r:off</strong></p>
<pre class="listing"><span class="Keyword">import</span> <span class="Identifier">std</span><span class="Operator">/</span><span class="Identifier">options</span>
<span class="Keyword">type</span> <span class="Identifier">TokenKind</span> <span class="Operator">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">Symbol</span><span class="Punctuation">,</span> <span class="Identifier">Sign</span>

<span class="Comment"># Some random data</span>
<span class="Comment"># We can use expect to filter out any unknown tokens when we parse it.</span>
<span class="Keyword">let</span> <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">Option</span><span class="Punctuation">[</span><span class="Identifier">TokenKind</span><span class="Punctuation">]</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Operator">@</span><span class="Punctuation">[</span>
  <span class="Identifier">some</span><span class="Punctuation">(</span><span class="Identifier">Symbol</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">some</span><span class="Punctuation">(</span><span class="Identifier">Symbol</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">none</span><span class="Punctuation">(</span><span class="Identifier">TokenKind</span><span class="Punctuation">)</span><span class="Punctuation">,</span>
<span class="Punctuation">]</span>

<span class="Keyword">for</span> <span class="Identifier">i</span> <span class="Keyword">in</span> <span class="Identifier">data</span><span class="Punctuation">:</span>
  <span class="Comment"># Here we use expect as a kind of safety mechanism.</span>
  <span class="Keyword">discard</span> <span class="Identifier">i</span><span class="Operator">.</span><span class="Identifier">expect</span><span class="Punctuation">(</span><span class="StringLit">&quot;Unknown token encountered!&quot;</span><span class="Punctuation">)</span></pre>
    <a href="https://github.com/penguinite/expect/tree/main/src/expect.nim#L25" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/penguinite/expect/edit/main/src/expect.nim#L25" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="expectFunc-procs-all">
  <div id="expectFunc,Option[T],proc">
  <dt><pre><span class="Keyword">func</span> <a href="#expectFunc%2COption%5BT%5D%2Cproc"><span class="Identifier">expectFunc</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">opt</span><span class="Other">:</span> <span class="Identifier">Option</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">err_func</span><span class="Other">:</span> <span class="Keyword">proc</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
  <dd>
    
    <p>This procedure does the same things that <tt class="docutils literal"><span class="pre"><span class="Identifier">expect</span><span class="Punctuation">(</span><span class="Punctuation">)</span></span></tt> does, but it allows you to pass a procedure instead of printing an error message and quitting.</p>
<p>You sadly can't pass data to the procedure that will be called, but you can access variables in the function scope instead. That might serve as a suitable alternative.</p>
<p><em>This is just a `func`ified version, for functional no-side-effect calls.</em></p>

    <a href="https://github.com/penguinite/expect/tree/main/src/expect.nim#L78" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/penguinite/expect/edit/main/src/expect.nim#L78" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="expectProc-procs-all">
  <div id="expectProc,Option[T],proc">
  <dt><pre><span class="Keyword">proc</span> <a href="#expectProc%2COption%5BT%5D%2Cproc"><span class="Identifier">expectProc</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">opt</span><span class="Other">:</span> <span class="Identifier">Option</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">err_proc</span><span class="Other">:</span> <span class="Keyword">proc</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">deprecated</span><span class="Other">:</span> <span class="StringLit">&quot;expectProc is now simply called expect(), Rename it if you\'d like to&quot;</span></span>.}</pre></dt>
  <dd>
    <div class="deprecation-message">
  <b>Deprecated:</b> expectProc is now simply called expect(), Rename it if you&apos;d like to
</div>

    This procedure does the same things that <tt class="docutils literal"><span class="pre"><span class="Identifier">expect</span><span class="Punctuation">(</span><span class="Punctuation">)</span></span></tt> does, but it allows you to pass a procedure instead of just a string.
    <a href="https://github.com/penguinite/expect/tree/main/src/expect.nim#L90" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/penguinite/expect/edit/main/src/expect.nim#L90" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2024-05-17 10:38:05 UTC</small>
      </div>
    </div>
  </div>
  
  <!-- Google fonts -->
  <link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>
</body>
</html>
